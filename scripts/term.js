let terminalBody; // âœ… FIX: moved from const at top

/* ============================
   FILESYSTEM (generated using )
============================ */
const filesystem = {
  "type": "directory",
  "children": {
    ".github": {
      "type": "directory",
      "children": {
        "workflows": {
          "type": "directory",
          "children": {
            "static.yml": {
              "type": "file"
            }
          }
        }
      }
    },
    ".idx": {
      "type": "directory",
      "children": {
        "dev.nix": {
          "type": "file"
        },
        "integrations.json": {
          "type": "file"
        }
      }
    },
    ".vscode": {
      "type": "directory",
      "children": {
        "settings.json": {
          "type": "file"
        }
      }
    },
    "about.html": {
      "type": "file"
    },
    "AIcode.txt": {
      "type": "file"
    },
    "assignments": {
      "type": "directory",
      "children": {
        "demo-project": {
          "type": "directory",
          "children": {
            "about.html": {
              "type": "file"
            },
            "contact.html": {
              "type": "file"
            },
            "faq.html": {
              "type": "file"
            },
            "footer.html": {
              "type": "file"
            },
            "header.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "flower.svg": {
                  "type": "file"
                },
                "gallery": {
                  "type": "directory",
                  "children": {
                    "forest-unsplash.jpg": {
                      "type": "file"
                    },
                    "forest2-unsplash.jpg": {
                      "type": "file"
                    }
                  }
                },
                "gavel-solid-full.svg": {
                  "type": "file"
                },
                "gavel-solid-light.svg": {
                  "type": "file"
                },
                "gavel-solid.svg": {
                  "type": "file"
                },
                "innovation_retail_icon.png": {
                  "type": "file"
                },
                "logo-white.png": {
                  "type": "file"
                },
                "logo.png": {
                  "type": "file"
                }
              }
            },
            "index.html": {
              "type": "file"
            },
            "scripts": {
              "type": "directory",
              "children": {
                "gsap.js": {
                  "type": "file"
                },
                "main.js": {
                  "type": "file"
                }
              }
            },
            "styles": {
              "type": "directory",
              "children": {
                "main.css": {
                  "type": "file"
                }
              }
            }
          }
        },
        "demo-project2": {
          "type": "directory",
          "children": {
            "css": {
              "type": "directory",
              "children": {
                "style.css": {
                  "type": "file"
                }
              }
            },
            "img": {
              "type": "directory",
              "children": {
                "breed.jpg": {
                  "type": "file"
                },
                "C++.png": {
                  "type": "file"
                },
                "C.png": {
                  "type": "file"
                },
                "chess.jpg": {
                  "type": "file"
                },
                "coding.jpg": {
                  "type": "file"
                },
                "cp-removebg-preview.png": {
                  "type": "file"
                },
                "css.png": {
                  "type": "file"
                },
                "extras.jpg": {
                  "type": "file"
                },
                "fe-removebg-preview.png": {
                  "type": "file"
                },
                "gfg.png": {
                  "type": "file"
                },
                "hackathon.jpg": {
                  "type": "file"
                },
                "html.png": {
                  "type": "file"
                },
                "js.png": {
                  "type": "file"
                },
                "lib1.jpg": {
                  "type": "file"
                },
                "ml-removebg-preview.png": {
                  "type": "file"
                },
                "price.jpg": {
                  "type": "file"
                },
                "profile.jpg": {
                  "type": "file"
                },
                "python.png": {
                  "type": "file"
                },
                "speaker.jpg": {
                  "type": "file"
                },
                "video4.mp4": {
                  "type": "file"
                },
                "weather.jpg": {
                  "type": "file"
                }
              }
            },
            "index.html": {
              "type": "file"
            },
            "js": {
              "type": "directory",
              "children": {
                "script.js": {
                  "type": "file"
                }
              }
            }
          }
        },
        "week01": {
          "type": "directory",
          "children": {
            "css": {
              "type": "directory",
              "children": {
                "term_style.css": {
                  "type": "file"
                }
              }
            },
            "index.html": {
              "type": "file"
            },
            "js": {
              "type": "directory",
              "children": {
                "term.js": {
                  "type": "file"
                }
              }
            },
            "style.css": {
              "type": "file"
            }
          }
        },
        "week02": {
          "type": "directory",
          "children": {
            "copy.css": {
              "type": "file"
            }
          }
        },
        "week11": {
          "type": "directory",
          "children": {
            "images": {
              "type": "directory",
              "children": {
                "dresser-cropped.jpg": {
                  "type": "file"
                },
                "flex-assignment-desktop.jpg": {
                  "type": "file"
                },
                "flex-assignment-mobile.jpg": {
                  "type": "file"
                },
                "profile.jpg": {
                  "type": "file"
                }
              }
            },
            "index.html": {
              "type": "file"
            }
          }
        }
      }
    },
    "book_apps": {
      "type": "directory",
      "children": {
        "ch01": {
          "type": "directory",
          "children": {
            "book.css": {
              "type": "file"
            },
            "javascript_jquery.html": {
              "type": "file"
            },
            "javascript_jquery.jpg": {
              "type": "file"
            }
          }
        },
        "ch02": {
          "type": "directory",
          "children": {
            "book.css": {
              "type": "file"
            },
            "javascript_jquery.html": {
              "type": "file"
            },
            "javascript_jquery.jpg": {
              "type": "file"
            }
          }
        },
        "ch04": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "logo.gif": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch05": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "logo.gif": {
                      "type": "file"
                    }
                  }
                },
                "index1.html": {
                  "type": "file"
                },
                "index2.html": {
                  "type": "file"
                },
                "index3.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main1.css": {
                      "type": "file"
                    },
                    "main2.css": {
                      "type": "file"
                    },
                    "main3.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch06": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "logo.gif": {
                      "type": "file"
                    },
                    "logo.jpg": {
                      "type": "file"
                    },
                    "sampson_dinosaur.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "sampson.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "combined.css": {
                      "type": "file"
                    },
                    "main.css": {
                      "type": "file"
                    },
                    "speaker.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch07": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "logo.gif": {
                      "type": "file"
                    },
                    "sampson_dinosaur.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "sampson.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    },
                    "speaker.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch08": {
          "type": "directory",
          "children": {
            "ch08_fluid": {
              "type": "directory",
              "children": {
                "town_hall": {
                  "type": "directory",
                  "children": {
                    "images": {
                      "type": "directory",
                      "children": {
                        "favicon.ico": {
                          "type": "file"
                        },
                        "logo.gif": {
                          "type": "file"
                        },
                        "sampson.jpg": {
                          "type": "file"
                        }
                      }
                    },
                    "index.html": {
                      "type": "file"
                    },
                    "sampson.html": {
                      "type": "file"
                    },
                    "styles": {
                      "type": "directory",
                      "children": {
                        "main.css": {
                          "type": "file"
                        },
                        "speaker.css": {
                          "type": "file"
                        }
                      }
                    }
                  }
                }
              }
            },
            "ch08_media_queries_desktop_first": {
              "type": "directory",
              "children": {
                "town_hall": {
                  "type": "directory",
                  "children": {
                    "images": {
                      "type": "directory",
                      "children": {
                        "favicon.ico": {
                          "type": "file"
                        },
                        "logo.gif": {
                          "type": "file"
                        },
                        "sampson.jpg": {
                          "type": "file"
                        }
                      }
                    },
                    "index.html": {
                      "type": "file"
                    },
                    "js": {
                      "type": "directory",
                      "children": {
                        "jquery.slicknav.min.js": {
                          "type": "file"
                        }
                      }
                    },
                    "sampson.html": {
                      "type": "file"
                    },
                    "styles": {
                      "type": "directory",
                      "children": {
                        "main.css": {
                          "type": "file"
                        },
                        "slicknav.css": {
                          "type": "file"
                        },
                        "speaker.css": {
                          "type": "file"
                        }
                      }
                    }
                  }
                }
              }
            },
            "ch08_media_queries_mobile_first": {
              "type": "directory",
              "children": {
                "town_hall": {
                  "type": "directory",
                  "children": {
                    "images": {
                      "type": "directory",
                      "children": {
                        "favicon.ico": {
                          "type": "file"
                        },
                        "logo.gif": {
                          "type": "file"
                        },
                        "sampson.jpg": {
                          "type": "file"
                        }
                      }
                    },
                    "index.html": {
                      "type": "file"
                    },
                    "js": {
                      "type": "directory",
                      "children": {
                        "jquery.slicknav.min.js": {
                          "type": "file"
                        }
                      }
                    },
                    "sampson.html": {
                      "type": "file"
                    },
                    "styles": {
                      "type": "directory",
                      "children": {
                        "main.css": {
                          "type": "file"
                        },
                        "slicknav.css": {
                          "type": "file"
                        },
                        "speaker.css": {
                          "type": "file"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "ch09": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "logo.gif": {
                      "type": "file"
                    },
                    "sampson.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "js": {
                  "type": "directory",
                  "children": {
                    "jquery.slicknav.min.js": {
                      "type": "file"
                    }
                  }
                },
                "sampson.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    },
                    "slicknav.css": {
                      "type": "file"
                    },
                    "speaker.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch10": {
          "type": "directory",
          "children": {
            "ch10_12_column": {
              "type": "directory",
              "children": {
                "town_hall": {
                  "type": "directory",
                  "children": {
                    "images": {
                      "type": "directory",
                      "children": {
                        "favicon.ico": {
                          "type": "file"
                        },
                        "logo.gif": {
                          "type": "file"
                        },
                        "sampson.jpg": {
                          "type": "file"
                        },
                        "sampson_dinosaur.jpg": {
                          "type": "file"
                        }
                      }
                    },
                    "index.html": {
                      "type": "file"
                    },
                    "js": {
                      "type": "directory",
                      "children": {
                        "jquery.slicknav.min.js": {
                          "type": "file"
                        }
                      }
                    },
                    "sampson.html": {
                      "type": "file"
                    },
                    "styles": {
                      "type": "directory",
                      "children": {
                        "main.css": {
                          "type": "file"
                        },
                        "slicknav.css": {
                          "type": "file"
                        },
                        "speaker.css": {
                          "type": "file"
                        }
                      }
                    }
                  }
                }
              }
            },
            "ch10_template_areas": {
              "type": "directory",
              "children": {
                "town_hall": {
                  "type": "directory",
                  "children": {
                    "images": {
                      "type": "directory",
                      "children": {
                        "favicon.ico": {
                          "type": "file"
                        },
                        "logo.gif": {
                          "type": "file"
                        },
                        "sampson.jpg": {
                          "type": "file"
                        },
                        "sampson_dinosaur.jpg": {
                          "type": "file"
                        }
                      }
                    },
                    "index.html": {
                      "type": "file"
                    },
                    "js": {
                      "type": "directory",
                      "children": {
                        "jquery.slicknav.min.js": {
                          "type": "file"
                        }
                      }
                    },
                    "sampson.html": {
                      "type": "file"
                    },
                    "styles": {
                      "type": "directory",
                      "children": {
                        "main.css": {
                          "type": "file"
                        },
                        "slicknav.css": {
                          "type": "file"
                        },
                        "speaker.css": {
                          "type": "file"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "ch11": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "logo.gif": {
                      "type": "file"
                    },
                    "sampson_dinosaur.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "sampson.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    },
                    "speaker.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch13": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "logo.gif": {
                      "type": "file"
                    },
                    "sampson_dinosaur.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "member.html": {
                  "type": "file"
                },
                "register_account.html": {
                  "type": "file"
                },
                "sampson.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    },
                    "member.css": {
                      "type": "file"
                    },
                    "speaker.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch14": {
          "type": "directory",
          "children": {
            "town_hall": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "poster.png": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "media": {
                  "type": "directory",
                  "children": {
                    "sjv_speakers_sampson.mp4": {
                      "type": "file"
                    },
                    "sjv_welcome.mp3": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        },
        "ch18": {
          "type": "directory",
          "children": {
            "email_list_javascript": {
              "type": "directory",
              "children": {
                "email_list.css": {
                  "type": "file"
                },
                "email_list.js": {
                  "type": "file"
                },
                "index.html": {
                  "type": "file"
                },
                "join.html": {
                  "type": "file"
                }
              }
            },
            "email_list_jquery": {
              "type": "directory",
              "children": {
                "email_list.css": {
                  "type": "file"
                },
                "email_list.js": {
                  "type": "file"
                },
                "index.html": {
                  "type": "file"
                },
                "join.html": {
                  "type": "file"
                }
              }
            },
            "image_swap": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "h1.jpg": {
                      "type": "file"
                    },
                    "h2.jpg": {
                      "type": "file"
                    },
                    "h3.jpg": {
                      "type": "file"
                    },
                    "h4.jpg": {
                      "type": "file"
                    },
                    "h5.jpg": {
                      "type": "file"
                    },
                    "h6.jpg": {
                      "type": "file"
                    }
                  }
                },
                "image_swap.js": {
                  "type": "file"
                },
                "index.html": {
                  "type": "file"
                },
                "main.css": {
                  "type": "file"
                },
                "thumbnails": {
                  "type": "directory",
                  "children": {
                    "t1.jpg": {
                      "type": "file"
                    },
                    "t2.jpg": {
                      "type": "file"
                    },
                    "t3.jpg": {
                      "type": "file"
                    },
                    "t4.jpg": {
                      "type": "file"
                    },
                    "t5.jpg": {
                      "type": "file"
                    },
                    "t6.jpg": {
                      "type": "file"
                    }
                  }
                }
              }
            },
            "slide_show": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "casting1.jpg": {
                      "type": "file"
                    },
                    "casting2.jpg": {
                      "type": "file"
                    },
                    "catchrelease.jpg": {
                      "type": "file"
                    },
                    "fish.jpg": {
                      "type": "file"
                    },
                    "lures.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                },
                "main.css": {
                  "type": "file"
                },
                "slide_show.js": {
                  "type": "file"
                }
              }
            }
          }
        }
      }
    },
    "book_examples": {
      "type": "directory",
      "children": {
        "ch02": {
          "type": "directory",
          "children": {
            "04_comments.html": {
              "type": "file"
            },
            "06_basic_selectors.html": {
              "type": "file"
            },
            "basic_selectors.css": {
              "type": "file"
            }
          }
        },
        "ch03": {
          "type": "directory",
          "children": {
            "01_title_favicon_meta.html": {
              "type": "file"
            },
            "02_lang_headings_paragraphs.html": {
              "type": "file"
            },
            "03_structural_elements.html": {
              "type": "file"
            },
            "04_div.html": {
              "type": "file"
            },
            "05_inline.html": {
              "type": "file"
            },
            "06_entities_block.html": {
              "type": "file"
            },
            "08_links.html": {
              "type": "file"
            },
            "09_lists.html": {
              "type": "file"
            },
            "10_image.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "favicon.ico": {
                  "type": "file"
                },
                "logo.jpg": {
                  "type": "file"
                },
                "murachlogo.gif": {
                  "type": "file"
                },
                "murachlogo.jpg": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch04": {
          "type": "directory",
          "children": {
            "02_selectors.html": {
              "type": "file"
            },
            "04_measurements.html": {
              "type": "file"
            },
            "05_colors.html": {
              "type": "file"
            },
            "06_advanced_colors.html": {
              "type": "file"
            },
            "07_font_families.html": {
              "type": "file"
            },
            "09_text_shadow.html": {
              "type": "file"
            },
            "10_float_image.html": {
              "type": "file"
            },
            "11_other_selectors.html": {
              "type": "file"
            },
            "12_pseudo.html": {
              "type": "file"
            },
            "17_custom_properties_eg1.html": {
              "type": "file"
            },
            "17_custom_properties_eg2.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "logo.gif": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch05": {
          "type": "directory",
          "children": {
            "02_box_model.html": {
              "type": "file"
            },
            "09_corners_shadow.html": {
              "type": "file"
            },
            "11_gradients.html": {
              "type": "file"
            },
            "default_margins.html": {
              "type": "file"
            },
            "margin_collapse.html": {
              "type": "file"
            }
          }
        },
        "ch06": {
          "type": "directory",
          "children": {
            "01_float_clear.html": {
              "type": "file"
            },
            "02_2_column_fixed.html": {
              "type": "file"
            },
            "03_2_column_fluid.html": {
              "type": "file"
            },
            "03_2_column_fluid_fixed.html": {
              "type": "file"
            },
            "04_3_column_fixed.html": {
              "type": "file"
            },
            "10_text_columns.html": {
              "type": "file"
            },
            "10_text_columns_span.html": {
              "type": "file"
            },
            "11_two_column_article.html": {
              "type": "file"
            },
            "13_absolute_and_fixed.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "favicon.ico": {
                  "type": "file"
                },
                "logo.gif": {
                  "type": "file"
                },
                "logo.jpg": {
                  "type": "file"
                },
                "sampson_dinosaur.jpg": {
                  "type": "file"
                }
              }
            },
            "styles": {
              "type": "directory",
              "children": {
                "main.css": {
                  "type": "file"
                },
                "speaker_2-column.css": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch07": {
          "type": "directory",
          "children": {
            "01_thru_07_lists.html": {
              "type": "file"
            },
            "08_09_12_13_links.html": {
              "type": "file"
            },
            "10_new_window.html": {
              "type": "file"
            },
            "11_placeholders.html": {
              "type": "file"
            },
            "14_15_navigation.html": {
              "type": "file"
            },
            "16_navigation _2_tier.html": {
              "type": "file"
            },
            "17_18_navigation _3_tier.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "cart_animated.gif": {
                  "type": "file"
                },
                "javascriptbook.jpg": {
                  "type": "file"
                },
                "murach_100_square.jpg": {
                  "type": "file"
                },
                "sampson_dinosaur.jpg": {
                  "type": "file"
                },
                "star.png": {
                  "type": "file"
                }
              }
            },
            "media": {
              "type": "directory",
              "children": {
                "chapter_01.ppsx": {
                  "type": "file"
                },
                "summary.docx": {
                  "type": "file"
                },
                "summary.pdf": {
                  "type": "file"
                },
                "twist_away.mp3": {
                  "type": "file"
                }
              }
            },
            "styles": {
              "type": "directory",
              "children": {
                "navigation.css": {
                  "type": "file"
                },
                "navigation_2_tier.css": {
                  "type": "file"
                },
                "navigation_3_tier.css": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch08": {
          "type": "directory",
          "children": {
            "03_fluid_vs_fixed.html": {
              "type": "file"
            },
            "04_calculate_fluid_widths.html": {
              "type": "file"
            },
            "05_vmin_units.html": {
              "type": "file"
            },
            "05_vw_units.html": {
              "type": "file"
            },
            "06_calculate_font_sizes.html": {
              "type": "file"
            },
            "07_scale_images.html": {
              "type": "file"
            },
            "14_slicknav.html": {
              "type": "file"
            },
            "17_container_queries.html": {
              "type": "file"
            },
            "ch08_fluid_meta": {
              "type": "directory",
              "children": {
                "town_hall": {
                  "type": "directory",
                  "children": {
                    "images": {
                      "type": "directory",
                      "children": {
                        "favicon.ico": {
                          "type": "file"
                        },
                        "logo.gif": {
                          "type": "file"
                        },
                        "sampson.jpg": {
                          "type": "file"
                        }
                      }
                    },
                    "index.html": {
                      "type": "file"
                    },
                    "js": {
                      "type": "directory",
                      "children": {
                        "jquery.slicknav.min.js": {
                          "type": "file"
                        }
                      }
                    },
                    "sampson.html": {
                      "type": "file"
                    },
                    "styles": {
                      "type": "directory",
                      "children": {
                        "main.css": {
                          "type": "file"
                        },
                        "slicknav.css": {
                          "type": "file"
                        },
                        "speaker.css": {
                          "type": "file"
                        }
                      }
                    }
                  }
                }
              }
            },
            "ch08_fluid_no_meta": {
              "type": "directory",
              "children": {
                "town_hall": {
                  "type": "directory",
                  "children": {
                    "images": {
                      "type": "directory",
                      "children": {
                        "favicon.ico": {
                          "type": "file"
                        },
                        "logo.gif": {
                          "type": "file"
                        },
                        "sampson.jpg": {
                          "type": "file"
                        }
                      }
                    },
                    "index.html": {
                      "type": "file"
                    },
                    "js": {
                      "type": "directory",
                      "children": {
                        "jquery.slicknav.min.js": {
                          "type": "file"
                        }
                      }
                    },
                    "sampson.html": {
                      "type": "file"
                    },
                    "styles": {
                      "type": "directory",
                      "children": {
                        "main.css": {
                          "type": "file"
                        },
                        "slicknav.css": {
                          "type": "file"
                        },
                        "speaker.css": {
                          "type": "file"
                        }
                      }
                    }
                  }
                }
              }
            },
            "container_queries": {
              "type": "directory",
              "children": {
                "container.html": {
                  "type": "file"
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "sampson_dinosaur.jpg": {
                      "type": "file"
                    }
                  }
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    }
                  }
                }
              }
            },
            "container_query_test": {
              "type": "directory",
              "children": {
                "container.html": {
                  "type": "file"
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "sampson_dinosaur.jpg": {
                      "type": "file"
                    }
                  }
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    }
                  }
                }
              }
            },
            "fluid_layout_container.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "favicon.ico": {
                  "type": "file"
                },
                "logo.gif": {
                  "type": "file"
                },
                "murachlogo.gif": {
                  "type": "file"
                },
                "sampson_dinosaur.jpg": {
                  "type": "file"
                },
                "students.jpg": {
                  "type": "file"
                }
              }
            },
            "js": {
              "type": "directory",
              "children": {
                "jquery.slicknav.min.js": {
                  "type": "file"
                }
              }
            },
            "styles": {
              "type": "directory",
              "children": {
                "main.css": {
                  "type": "file"
                },
                "main_container_queries.css": {
                  "type": "file"
                },
                "slicknav.css": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch09": {
          "type": "directory",
          "children": {
            "01_intro.html": {
              "type": "file"
            },
            "02_first_flexbox.html": {
              "type": "file"
            },
            "03_main_axis_alignment.html": {
              "type": "file"
            },
            "04_cross_axis_alignment.html": {
              "type": "file"
            },
            "05_wrap_alignment.html": {
              "type": "file"
            },
            "06_flex-basis.html": {
              "type": "file"
            },
            "06_flex-grow.html": {
              "type": "file"
            },
            "06_flex-shrink.html": {
              "type": "file"
            },
            "06_flex.html": {
              "type": "file"
            },
            "07_order.html": {
              "type": "file"
            }
          }
        },
        "ch10": {
          "type": "directory",
          "children": {
            "02_basic_grid.html": {
              "type": "file"
            },
            "03_grid_track_size.html": {
              "type": "file"
            },
            "04_alignment.html": {
              "type": "file"
            },
            "04_page_with_alignment.html": {
              "type": "file"
            },
            "06_numbered_lines.html": {
              "type": "file"
            },
            "07_named_lines.html": {
              "type": "file"
            },
            "08_template_areas.html": {
              "type": "file"
            },
            "09_12_column_grid.html": {
              "type": "file"
            },
            "15_advanced_grid.html": {
              "type": "file"
            },
            "15_call_to_action.html": {
              "type": "file"
            },
            "15_fixed_sidebar.html": {
              "type": "file"
            },
            "15_headline_and_gallery.html": {
              "type": "file"
            },
            "15_three_boxes.html": {
              "type": "file"
            }
          }
        },
        "ch11": {
          "type": "directory",
          "children": {
            "01_animated.html": {
              "type": "file"
            },
            "02_resizing.html": {
              "type": "file"
            },
            "03_alignment.html": {
              "type": "file"
            },
            "04_float.html": {
              "type": "file"
            },
            "06_12_horses": {
              "type": "directory",
              "children": {
                "06_image_rollover.html": {
                  "type": "file"
                },
                "12_favicon.html": {
                  "type": "file"
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "favicon.ico": {
                      "type": "file"
                    },
                    "horse_logo.jpg": {
                      "type": "file"
                    },
                    "p1.jpg": {
                      "type": "file"
                    },
                    "p2.jpg": {
                      "type": "file"
                    },
                    "p3.jpg": {
                      "type": "file"
                    },
                    "p4.jpg": {
                      "type": "file"
                    },
                    "p5.jpg": {
                      "type": "file"
                    },
                    "p6.jpg": {
                      "type": "file"
                    },
                    "thumbnails": {
                      "type": "directory",
                      "children": {
                        "t1.jpg": {
                          "type": "file"
                        },
                        "t2.jpg": {
                          "type": "file"
                        },
                        "t3.jpg": {
                          "type": "file"
                        },
                        "t4.jpg": {
                          "type": "file"
                        },
                        "t5.jpg": {
                          "type": "file"
                        },
                        "t6.jpg": {
                          "type": "file"
                        }
                      }
                    }
                  }
                },
                "p1.html": {
                  "type": "file"
                },
                "p2.html": {
                  "type": "file"
                },
                "p3.html": {
                  "type": "file"
                },
                "p4.html": {
                  "type": "file"
                },
                "p5.html": {
                  "type": "file"
                },
                "p6.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "thumbnails.css": {
                      "type": "file"
                    }
                  }
                }
              }
            },
            "07_image_map.html": {
              "type": "file"
            },
            "08_img_element": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "mountains_large.png": {
                      "type": "file"
                    },
                    "mountains_medium.png": {
                      "type": "file"
                    },
                    "mountains_small.png": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "08_picture_element": {
              "type": "directory",
              "children": {
                "images": {
                  "type": "directory",
                  "children": {
                    "mountains.png": {
                      "type": "file"
                    },
                    "mountains_close.png": {
                      "type": "file"
                    },
                    "mountains_far.png": {
                      "type": "file"
                    },
                    "mountains_mid.png": {
                      "type": "file"
                    },
                    "mountains_small.avif": {
                      "type": "file"
                    },
                    "mountains_small.webp": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "09_logo.html": {
              "type": "file"
            },
            "10_transparency.html": {
              "type": "file"
            },
            "12_font_awesome.html": {
              "type": "file"
            },
            "13_css_font_face": {
              "type": "directory",
              "children": {
                "HARNGTON.TTF": {
                  "type": "file"
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "14_adobe_web_fonts": {
              "type": "directory",
              "children": {
                "index.html": {
                  "type": "file"
                }
              }
            },
            "14_google_web_fonts": {
              "type": "directory",
              "children": {
                "index.html": {
                  "type": "file"
                }
              }
            },
            "images": {
              "type": "directory",
              "children": {
                "earth.gif": {
                  "type": "file"
                },
                "email.gif": {
                  "type": "file"
                },
                "lily.jpg": {
                  "type": "file"
                },
                "lilypads.jpg": {
                  "type": "file"
                },
                "star.jpg": {
                  "type": "file"
                },
                "star_opaque.gif": {
                  "type": "file"
                },
                "star_transparent.gif": {
                  "type": "file"
                },
                "students.jpg": {
                  "type": "file"
                },
                "telephone.gif": {
                  "type": "file"
                },
                "washington_divided.gif": {
                  "type": "file"
                },
                "web.gif": {
                  "type": "file"
                },
                "web_books.jpg": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch12": {
          "type": "directory",
          "children": {
            "01_intro.html": {
              "type": "file"
            },
            "02_table_1_unformatted.html": {
              "type": "file"
            },
            "03_table_2.html": {
              "type": "file"
            },
            "04_table_2_css.html": {
              "type": "file"
            },
            "05_table_pseudo-classes.html": {
              "type": "file"
            },
            "06_table_figure.html": {
              "type": "file"
            },
            "07_table_merge.html": {
              "type": "file"
            },
            "08_table_accessibility.html": {
              "type": "file"
            },
            "09_table_2_rwd.html": {
              "type": "file"
            }
          }
        },
        "ch13": {
          "type": "directory",
          "children": {
            "01_form.html": {
              "type": "file"
            },
            "02_buttons.html": {
              "type": "file"
            },
            "03_textarea.html": {
              "type": "file"
            },
            "03_textfields.html": {
              "type": "file"
            },
            "04_radio_checkbox_label.html": {
              "type": "file"
            },
            "05_lists.html": {
              "type": "file"
            },
            "06_number_email_url_tel.html": {
              "type": "file"
            },
            "07_dates.html": {
              "type": "file"
            },
            "08_align_controls.html": {
              "type": "file"
            },
            "09_fieldset.html": {
              "type": "file"
            },
            "10_access_keys.html": {
              "type": "file"
            },
            "11_validation.html": {
              "type": "file"
            },
            "12_regex.html": {
              "type": "file"
            },
            "16_search.html": {
              "type": "file"
            },
            "17_fileupload.html": {
              "type": "file"
            },
            "18_color.html": {
              "type": "file"
            },
            "18_progress_and_meter.html": {
              "type": "file"
            },
            "18_range.html": {
              "type": "file"
            },
            "19_datalist.html": {
              "type": "file"
            },
            "19_output.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "addtocart.png": {
                  "type": "file"
                },
                "submit.jpg": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch14": {
          "type": "directory",
          "children": {
            "02_audio_element.html": {
              "type": "file"
            },
            "02_video_element.html": {
              "type": "file"
            },
            "images": {
              "type": "directory",
              "children": {
                "poster.png": {
                  "type": "file"
                }
              }
            },
            "media": {
              "type": "directory",
              "children": {
                "sjv_speakers_sampson.mp4": {
                  "type": "file"
                },
                "sjv_speakers_sampson.webm": {
                  "type": "file"
                },
                "sjv_welcome.mp3": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch15": {
          "type": "directory",
          "children": {
            "01_transitions_basic": {
              "type": "directory",
              "children": {
                "index.html": {
                  "type": "file"
                }
              }
            },
            "02_transitions": {
              "type": "directory",
              "children": {
                "css": {
                  "type": "directory",
                  "children": {
                    "styles.css": {
                      "type": "file"
                    },
                    "transitions.css": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "03_transforms_basic": {
              "type": "directory",
              "children": {
                "css": {
                  "type": "directory",
                  "children": {
                    "styles.css": {
                      "type": "file"
                    }
                  }
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "01.jpg": {
                      "type": "file"
                    },
                    "02.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "04_transforms": {
              "type": "directory",
              "children": {
                "css": {
                  "type": "directory",
                  "children": {
                    "styles.css": {
                      "type": "file"
                    },
                    "transforms.css": {
                      "type": "file"
                    }
                  }
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "01.jpg": {
                      "type": "file"
                    },
                    "02.jpg": {
                      "type": "file"
                    },
                    "03.jpg": {
                      "type": "file"
                    },
                    "04.jpg": {
                      "type": "file"
                    },
                    "05.jpg": {
                      "type": "file"
                    },
                    "06.jpg": {
                      "type": "file"
                    },
                    "07.jpg": {
                      "type": "file"
                    },
                    "08.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "05_animation_basic": {
              "type": "directory",
              "children": {
                "index.html": {
                  "type": "file"
                }
              }
            },
            "06_animations": {
              "type": "directory",
              "children": {
                "css": {
                  "type": "directory",
                  "children": {
                    "animation.css": {
                      "type": "file"
                    },
                    "styles.css": {
                      "type": "file"
                    }
                  }
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "01.jpg": {
                      "type": "file"
                    },
                    "02.jpg": {
                      "type": "file"
                    },
                    "03.jpg": {
                      "type": "file"
                    },
                    "04.jpg": {
                      "type": "file"
                    },
                    "05.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "07_filters_basic": {
              "type": "directory",
              "children": {
                "css": {
                  "type": "directory",
                  "children": {
                    "filters.css": {
                      "type": "file"
                    },
                    "styles.css": {
                      "type": "file"
                    }
                  }
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "01.jpg": {
                      "type": "file"
                    },
                    "02.jpg": {
                      "type": "file"
                    },
                    "03.jpg": {
                      "type": "file"
                    },
                    "04.jpg": {
                      "type": "file"
                    },
                    "05.jpg": {
                      "type": "file"
                    },
                    "06.jpg": {
                      "type": "file"
                    },
                    "07.jpg": {
                      "type": "file"
                    },
                    "08.jpg": {
                      "type": "file"
                    },
                    "09.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            },
            "08_filters": {
              "type": "directory",
              "children": {
                "css": {
                  "type": "directory",
                  "children": {
                    "filters.css": {
                      "type": "file"
                    },
                    "styles.css": {
                      "type": "file"
                    }
                  }
                },
                "images": {
                  "type": "directory",
                  "children": {
                    "01.jpg": {
                      "type": "file"
                    },
                    "02.jpg": {
                      "type": "file"
                    },
                    "03.jpg": {
                      "type": "file"
                    },
                    "04.jpg": {
                      "type": "file"
                    },
                    "05.jpg": {
                      "type": "file"
                    },
                    "06.jpg": {
                      "type": "file"
                    },
                    "07.jpg": {
                      "type": "file"
                    },
                    "08.jpg": {
                      "type": "file"
                    },
                    "09.jpg": {
                      "type": "file"
                    }
                  }
                },
                "index.html": {
                  "type": "file"
                }
              }
            }
          }
        },
        "ch18": {
          "type": "directory",
          "children": {
            "01_current_date_and_year": {
              "type": "directory",
              "children": {
                "index.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    }
                  }
                }
              }
            },
            "02_current_date_and_year": {
              "type": "directory",
              "children": {
                "index.html": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    }
                  }
                }
              }
            },
            "05_print_page": {
              "type": "directory",
              "children": {
                "index.html": {
                  "type": "file"
                },
                "printPage.js": {
                  "type": "file"
                },
                "styles": {
                  "type": "directory",
                  "children": {
                    "main.css": {
                      "type": "file"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "contact.html": {
      "type": "file"
    },
    "demos": {
      "type": "directory",
      "children": {
        "chapter 9": {
          "type": "directory",
          "children": {
            "index.html": {
              "type": "file"
            },
            "styles.css": {
              "type": "file"
            }
          }
        }
      }
    },
    "experience.html": {
      "type": "file"
    },
    "footer.html": {
      "type": "file"
    },
    "gamelinks.txt": {
      "type": "file"
    },
    "gamesdir.html": {
      "type": "file"
    },
    "generateFS.js": {
      "type": "file"
    },
    "grid.html": {
      "type": "file"
    },
    "h origin main": {
      "type": "file"
    },
    "header.html": {
      "type": "file"
    },
    "home.html": {
      "type": "file"
    },
    "images": {
      "type": "directory",
      "children": {
        "bookshelf.png": {
          "type": "file"
        },
        "cisco.png": {
          "type": "file"
        },
        "github-mark-white.png": {
          "type": "file"
        },
        "hammertime_fitness.jpg": {
          "type": "file"
        },
        "hero-bg.jpg": {
          "type": "file"
        },
        "methodex.png": {
          "type": "file"
        },
        "photo.png": {
          "type": "file"
        },
        "pycode.png": {
          "type": "file"
        },
        "site_logo": {
          "type": "directory",
          "children": {
            "dm_logo.png": {
              "type": "file"
            },
            "FullLogo.jpg": {
              "type": "file"
            },
            "FullLogo.png": {
              "type": "file"
            },
            "FullLogo_NoBuffer.jpg": {
              "type": "file"
            },
            "FullLogo_NoBuffer.png": {
              "type": "file"
            },
            "FullLogo_Transparent.png": {
              "type": "file"
            },
            "FullLogo_Transparent_NoBuffer.png": {
              "type": "file"
            },
            "FullLogo_Transparent_notext.png": {
              "type": "file"
            },
            "just_logo.svg": {
              "type": "file"
            },
            "lm_logo.png": {
              "type": "file"
            }
          }
        },
        "webcode.png": {
          "type": "file"
        }
      }
    },
    "index.html": {
      "type": "file"
    },
    "midterm": {
      "type": "directory",
      "children": {
        "blogr-landing-page-main": {
          "type": "directory",
          "children": {
            "images": {
              "type": "directory",
              "children": {
                "bg-pattern-circles.svg": {
                  "type": "file"
                },
                "bg-pattern-intro-desktop.svg": {
                  "type": "file"
                },
                "bg-pattern-intro-mobile.svg": {
                  "type": "file"
                },
                "favicon-32x32.png": {
                  "type": "file"
                },
                "icon-arrow-dark.svg": {
                  "type": "file"
                },
                "icon-arrow-light.svg": {
                  "type": "file"
                },
                "icon-close.svg": {
                  "type": "file"
                },
                "icon-hamburger.svg": {
                  "type": "file"
                },
                "illustration-editor-desktop.svg": {
                  "type": "file"
                },
                "illustration-editor-mobile.svg": {
                  "type": "file"
                },
                "illustration-laptop-desktop.svg": {
                  "type": "file"
                },
                "illustration-laptop-mobile.svg": {
                  "type": "file"
                },
                "illustration-phones.svg": {
                  "type": "file"
                },
                "logo.svg": {
                  "type": "file"
                }
              }
            }
          }
        },
        "images": {
          "type": "directory",
          "children": {
            "bg-pattern-footer-desktop.svg": {
              "type": "file"
            },
            "bg-pattern-footer-mobile.svg": {
              "type": "file"
            },
            "bg-pattern-how-we-work-desktop.svg": {
              "type": "file"
            },
            "bg-pattern-how-we-work-mobile.svg": {
              "type": "file"
            },
            "bg-pattern-intro-left-desktop.svg": {
              "type": "file"
            },
            "bg-pattern-intro-left-mobile.svg": {
              "type": "file"
            },
            "bg-pattern-intro-right-desktop.svg": {
              "type": "file"
            },
            "bg-pattern-intro-right-mobile.svg": {
              "type": "file"
            },
            "bg-pattern-mobile-nav.svg": {
              "type": "file"
            },
            "favicon-32x32.png": {
              "type": "file"
            },
            "icon-affordable-prices.svg": {
              "type": "file"
            },
            "icon-close.svg": {
              "type": "file"
            },
            "icon-facebook.svg": {
              "type": "file"
            },
            "icon-hamburger.svg": {
              "type": "file"
            },
            "icon-instagram.svg": {
              "type": "file"
            },
            "icon-people-first.svg": {
              "type": "file"
            },
            "icon-pinterest.svg": {
              "type": "file"
            },
            "icon-snappy-process.svg": {
              "type": "file"
            },
            "icon-twitter.svg": {
              "type": "file"
            },
            "image-intro-desktop.jpg": {
              "type": "file"
            },
            "image-intro-mobile.jpg": {
              "type": "file"
            },
            "logo.svg": {
              "type": "file"
            }
          }
        },
        "index.html": {
          "type": "file"
        },
        "javascript": {
          "type": "directory",
          "children": {
            "main.js": {
              "type": "file"
            }
          }
        },
        "style-guide.md": {
          "type": "file"
        },
        "styles": {
          "type": "directory",
          "children": {
            "main.css": {
              "type": "file"
            }
          }
        }
      }
    },
    "moto-x3m-pp.html": {
      "type": "file"
    },
    "moto-x3m.html": {
      "type": "file"
    },
    "scripts": {
      "type": "directory",
      "children": {
        "aiterm.js": {
          "type": "file"
        },
        "main.js": {
          "type": "file"
        },
        "mainBU.js": {
          "type": "file"
        },
        "scan.js": {
          "type": "file"
        },
        "term.js": {
          "type": "file"
        },
        "termBU.js": {
          "type": "file"
        }
      }
    },
    "sift-renegade.html": {
      "type": "file"
    },
    "styles": {
      "type": "directory",
      "children": {
        "gamesdir.css": {
          "type": "file"
        },
        "homestyles.css": {
          "type": "file"
        },
        "styles.css": {
          "type": "file"
        }
      }
    }
  }
};
/* ============================
   STATE
============================ */
let currentDirectory = filesystem;
let pathStack = [];

/* ============================
   UTILITIES
============================ */
function getPromptPath() {
  return "~" + (pathStack.length ? "/" + pathStack.join("/") : "");
}

function findNode(startDir, path) {
  if (!path || path === "~") return filesystem;

  const parts = path.split("/").filter(Boolean);
  let current = path.startsWith("/") || path.startsWith("~")
    ? filesystem
    : startDir;

  for (let part of parts) {
    if (part === "..") {
      if (pathStack.length) pathStack.pop();
      current = findNode(filesystem, pathStack.join("/")) || filesystem;
      continue;
    }

    if (!current.children || !current.children[part]) return null;
    current = current.children[part];
  }

  return current;
}

function resolvePath(path) {
  if (!path) return null;

  if (path.startsWith("~")) {
    return findNode(filesystem, path.replace("~", ""));
  }

  return findNode(currentDirectory, path);
}

/* ============================
   TYPEWRITER
============================ */
function typeWriter(text, outputElement, callback) {
  let i = 0;
  const speed = 2;

  function type() {
    if (i < text.length) {
      const char = text.charAt(i);
      if (char === "<") {
        const tagEnd = text.indexOf(">", i);
        if (tagEnd !== -1) {
          outputElement.innerHTML += text.substring(i, tagEnd + 1);
          i = tagEnd + 1;
          type();
          return;
        }
      }
      outputElement.innerHTML += char;
      terminalBody.scrollTop = terminalBody.scrollHeight;
      i++;
      setTimeout(type, speed);
    } else if (callback) {
      callback();
    }
  }
  type();
}

/* ============================
   INPUT LINE
============================ */
function createNewInputLine() {
  const newLine = document.createElement("div");
  newLine.classList.add("terminal-line");
  newLine.innerHTML = `<span class="prompt">${getPromptPath()}$</span> <span contenteditable="true" class="terminal-input"></span>`;
  terminalBody.appendChild(newLine);

  const newInput = newLine.querySelector(".terminal-input");
  newInput.focus();
  newInput.addEventListener("keydown", handleKeyDown);
  terminalBody.scrollTop = terminalBody.scrollHeight;
}

function handleKeyDown(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    const currentInput = event.target;
    currentInput.contentEditable = false;
    currentInput.removeEventListener("keydown", handleKeyDown);

    const commandText = currentInput.textContent.trim();
    processCommand(commandText, () => {
      createNewInputLine();
    });
  }
}

/* ============================
   COMMAND PROCESSOR
============================ */
function processCommand(commandText, onComplete) {
  const commandParts = commandText.split(" ");
  const command = commandParts[0].toLowerCase();
  const argument = commandParts.slice(1).join(" ");

  if (!commandText) {
    if (onComplete) onComplete();
    return;
  }

  if (command === "clear") {
    terminalBody.innerHTML = "";
    if (onComplete) onComplete();
    return;
  }

  const outputLine = document.createElement("div");
  outputLine.classList.add("terminal-line");
  terminalBody.appendChild(outputLine);

  let outputText = "";
  let shouldHaveOutput = true;

  switch (command) {
    case "help":
      outputText =
        "help  - Displays this list of available commands.<br>" +
        "go    - Navigates to a page or URL.<br>" +
        "clear - Clears the terminal screen.<br>" +
        "ls    - Lists files and directories.<br>" +
        "sl    - i like trains<br>" +
        "cd    - Changes the current directory.";
      break;

    case "ls":
      if (currentDirectory.type === "directory") {
        const items = Object.keys(currentDirectory.children || {});
        outputText = items.join("  ");
      } else {
        outputText = "ls: not a directory";
      }
      break;
    
      case 'sl':
        const train = document.createElement('div');
        train.classList.add('train-container');
        
        // Set the train text
        train.textContent = 
            "      ====      ========\n"+
            "  ____||__  __  |      |\n"+
            " |  |  |  ||  | |      | \n"+
            "/--O-O-O-O-O-O-O-O-O-O-\\\n";
    
        // If light mode, set text color black
        if (document.body.classList.contains('light-mode')) {
            train.style.color = '#000';
        } else {
            train.style.color = '#fff';
        }
    
        // Append to terminal body
        terminalBody.appendChild(train);
    
        // Immediately call onComplete so terminal continues accepting input
        if (onComplete) onComplete();
    
        // Remove the train after animation duration
        setTimeout(() => {
            if (train.parentNode) train.parentNode.removeChild(train);
        }, 5000); // match the CSS animation
        return;
    

    case "cd":
      if (!argument || argument === "~") {
        currentDirectory = filesystem;
        pathStack = [];
        shouldHaveOutput = false;
        break;
      }

      if (argument === "..") {
        if (pathStack.length) pathStack.pop();
        currentDirectory =
          findNode(filesystem, pathStack.join("/")) || filesystem;
        shouldHaveOutput = false;
        break;
      }

      const target = resolvePath(argument);

      if (!target) {
        outputText = `cd: no such file or directory: ${argument}`;
        break;
      }

      if (target.type !== "directory") {
        outputText = `cd: not a directory: ${argument}`;
        break;
      }

      argument.split("/").forEach(p => {
        if (p && p !== ".") pathStack.push(p);
      });

      currentDirectory = target;
      shouldHaveOutput = false;
      break;

    case "go":
      if (!argument) {
        outputText = "go: missing destination";
        break;
      }

      const fileNode = resolvePath(argument);

      if (fileNode && fileNode.type === "file") {
        const urlPath =
          pathStack.length ? pathStack.join("/") + "/" + argument : argument;
        window.location.href = urlPath;
        return;
      }

      let url = argument;
      if (!url.startsWith("http")) url = "https://" + url;
      window.location.href = url;
      return;

    default:
      outputText = `command not found: ${commandText}`;
      break;
  }

  if (outputText && shouldHaveOutput) {
    typeWriter(outputText, outputLine, onComplete);
  } else {
    terminalBody.removeChild(outputLine);
    if (onComplete) onComplete();
  }
}

/* ============================
   BOOT
============================ */
document.addEventListener("DOMContentLoaded", () => {
  terminalBody = document.getElementById("terminal-body");

  if (!terminalBody) {
    console.error("Terminal error: #terminal-body not found.");
    return;
  }

  createNewInputLine();
});